(function e(t,n,r){function o(a,f){if(!n[a]){if(!t[a]){var h=typeof require==i&&require;if(!f&&h)return h(a,!0);if(u)return u(a,!0);throw new Error("Cannot find module '"+a+"'")}var p=n[a]={exports:{}};t[a][0].call(p[s],function(e){var n=t[a][1][e];return o(n?n:e)},p,p[s],e,t,n,r)}return n[a][s]}var i="function",s="exports",u=typeof require==i&&require;for(var a=0;a<r.length;a++)o(r[a]);return o})({1:[function(e,t,n){var r="rgba(0, 0, 0, 0.8)";t.exports=[{gridWidth:150,gridHeight:50,automaton:"gameOfLife",step:80,lifetime:500,borderColors:["rgba(23, 84, 187, 0.1)"],fillColors:["rgba(23, 84, 187, 0.8)"],cells:[[74,25,1],[75,24,1],[75,25,1],[75,26,1],[76,24,1]]},{gridWidth:120,gridHeight:40,automaton:"briansBrain",step:125,lifetime:100,borderColors:[],fillColors:["","rgba(23, 187, 84, 0.8)","rgba(23, 187, 84, 0.5)"],randomCells:!0},{gridWidth:38,gridHeight:13,automaton:"wireworld",step:250,lifetime:100,borderColors:["rgba(255, 255, 255, 0.1)",r,r,r],fillColors:["","rgba(0, 128, 255, 1.0)","rgba(255, 64, 0, 1.0)","rgba(255, 215, 0, 1.0)"],cells:[[2,3,3],[3,2,3],[4,2,3],[5,2,3],[6,2,3],[7,2,3],[8,2,3],[9,2,3],[10,2,3],[3,4,3],[4,4,3],[5,4,3],[6,4,3],[7,4,3],[8,4,3],[9,4,3],[10,4,3],[11,3,3],[12,3,3],[13,3,3],[14,3,3],[15,3,3],[16,3,3],[2,9,3],[3,8,3],[4,8,3],[5,8,3],[6,8,3],[7,8,3],[8,8,3],[9,8,3],[10,8,3],[3,10,3],[4,10,3],[5,10,3],[6,10,3],[7,10,3],[8,10,3],[9,10,3],[10,10,3],[11,9,3],[12,9,3],[13,9,3],[14,9,3],[15,9,3],[16,9,3],[17,4,3],[17,8,3],[16,6,3],[19,6,3],[16,5,3],[17,5,3],[18,5,3],[19,5,3],[16,7,3],[17,7,3],[18,7,3],[19,7,3],[20,6,3],[21,6,3],[22,6,3],[23,6,3],[24,6,3],[25,5,3],[25,4,3],[25,7,3],[25,8,3],[26,3,3],[27,3,3],[28,3,3],[29,2,3],[31,3,3],[29,4,3],[30,2,3],[31,2,3],[30,4,3],[31,4,3],[32,3,3],[33,3,3],[34,3,3],[35,3,3],[36,3,3],[37,3,3],[26,9,3],[27,9,3],[28,9,3],[29,8,3],[29,9,3],[29,10,3],[30,8,3],[31,8,3],[30,10,3],[31,10,3],[32,9,3],[33,9,3],[34,9,3],[35,9,3],[36,9,3],[37,9,3],[8,2,2],[9,2,1],[7,4,1],[8,4,2],[8,8,2],[9,8,1],[3,8,1],[2,9,2]]}]},{}],2:[function(e,t,n){var r="currentAutomaton",i="grid",s="addComponent",o="demoRound",u="demoIsInitialized",a="gridStepTimer",f="gridLogic",l="roundData",c="generation",h="width",p="height",d="length",v="cellWidth",m="cellHeight",g="strokeStyle",y="fillStyle",b=e("langeroids/lib/langeroids.js"),w=b._,E=e("langeroids/lib/game.js"),S=e("langeroids/lib/canvas-2d-renderer.js"),x=e("langeroids/lib/timer.js"),T=e("../lib/grid.js"),N=e("../lib/grid-logic.js"),C=e("../lib/logic/game-of-life.js"),k=e("../lib/logic/brians-brain.js"),L=e("../lib/logic/wireworld.js"),A=e("./demo-data.js");w.extend(N.prototype,{init:function(){this.automata={gameOfLife:new C,briansBrain:new k,wireworld:new L},this[r]="gameOfLife"},updateStates:function(){return this.automata[this[r]].tick(this[i])}}),function(){var e=new E;e[s](new S({canvas:"canvas"})),e[s]({onInit:function(e){this[o]=0,this[u]=!1,this[a]=new x({game:e,tDuration:125}),this[i]=new T,this[f]=new N({grid:this[i]}),this.initGrid()},initGrid:function(){var t=this[l]=A[this[o]];this[f][c]=0,this[i].clearCells();if(t){this[i][h]=t.gridWidth,this[i][p]=t.gridHeight,this[f][r]=t.automaton,t.step&&(this[a].tDuration=t.step);var n=t.randomCells?this.getRandomCells():t.cells;for(var s=0;s<n[d];s++)this[i].setCell(n[s][0],n[s][1],n[s][2])}var g=e.getComponent("renderer");this[v]=Math.round(g[h]/this[i][h]),this[m]=Math.round(g[p]/this[i][p]),this[u]=!0},getRandomCells:function(){var e=[];for(var t=0;t<this[i][p];t++)for(var n=0;n<this[i][h];n++)Math.random()>.95&&e.push([n,t,1]);return e},onUpdate:function(){this[a].done()&&(this[u]||this.initGrid(),this[f][c]>=this[l].lifetime&&(this[o]=(this[o]+1)%A[d],this[u]=!1),this[f].tick(),this[a].repeat())},onDraw:function(e){var t=e.ctx;e.clear("rgb(0,0,0)");var n=this[l].borderColors;n[d]===1&&(t[g]=n[0]);var r=this[l].fillColors;r[d]?r[d]===1&&(t[y]=r[0]):t[y]="rgba(23, 84, 187, 0.8)";for(var s=0;s<this[i][p];s++)for(var o=0;o<this[i][h];o++){var u=this[i].getCell(o,s);n[d]>1&&(t[g]=n[u||0]),n[d]&&t.strokeRect(o*this[v],s*this[m],this[v],this[m]),u&&(r[d]>1&&(t[y]=r[u]),t.fillRect(o*this[v],s*this[m],this[v],this[m]))}}}),e.start()}()},{"../lib/grid-logic.js":10,"../lib/grid.js":11,"../lib/logic/brians-brain.js":12,"../lib/logic/game-of-life.js":13,"../lib/logic/wireworld.js":15,"./demo-data.js":1,"langeroids/lib/canvas-2d-renderer.js":4,"langeroids/lib/game.js":5,"langeroids/lib/langeroids.js":6,"langeroids/lib/timer.js":7}],3:[function(e,t,n){function y(){this[r]=this[r]||{},this[i]=this[i]||undefined}function b(e){return typeof e===v}function w(e){return typeof e=="number"}function E(e){return typeof e=="object"&&e!==null}function S(e){return e===void 0}var r="_events",i="_maxListeners",s="prototype",o="defaultMaxListeners",u="error",a="length",f=!1,l=!0,c="addListener",h="listener must be a function",p="newListener",d="listener",v="function",m="removeListener",g="removeAllListeners";t.exports=y,y.EventEmitter=y,y[s][r]=undefined,y[s][i]=undefined,y[o]=10,y[s].setMaxListeners=function(e){if(!w(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this[i]=e,this},y[s].emit=function(e){var t,n,i,s,o,c;this[r]||(this[r]={});if(e===u)if(!this[r][u]||E(this[r][u])&&!this[r][u][a])throw t=arguments[1],t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');n=this[r][e];if(S(n))return f;if(b(n))switch(arguments[a]){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=arguments[a],s=new Array(i-1);for(o=1;o<i;o++)s[o-1]=arguments[o];n.apply(this,s)}else if(E(n)){i=arguments[a],s=new Array(i-1);for(o=1;o<i;o++)s[o-1]=arguments[o];c=n.slice(),i=c[a];for(o=0;o<i;o++)c[o].apply(this,s)}return l},y[s][c]=function(e,t){var n;if(!b(t))throw TypeError(h);this[r]||(this[r]={}),this[r][p]&&this.emit(p,e,b(t[d])?t[d]:t),this[r][e]?E(this[r][e])?this[r][e].push(t):this[r][e]=[this[r][e],t]:this[r][e]=t;if(E(this[r][e])&&!this[r][e].warned){var n;S(this[i])?n=y[o]:n=this[i],n&&n>0&&this[r][e][a]>n&&(this[r][e].warned=l,console[u]("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this[r][e][a]),typeof console.trace===v&&console.trace())}return this},y[s].on=y[s][c],y[s].once=function(e,t){function r(){this[m](e,r),n||(n=l,t.apply(this,arguments))}if(!b(t))throw TypeError(h);var n=f;return r[d]=t,this.on(e,r),this},y[s][m]=function(e,t){var n,i,s,o;if(!b(t))throw TypeError(h);if(!this[r]||!this[r][e])return this;n=this[r][e],s=n[a],i=-1;if(n===t||b(n[d])&&n[d]===t)delete this[r][e],this[r][m]&&this.emit(m,e,t);else if(E(n)){for(o=s;o-->0;)if(n[o]===t||n[o][d]&&n[o][d]===t){i=o;break}if(i<0)return this;n[a]===1?(n[a]=0,delete this[r][e]):n.splice(i,1),this[r][m]&&this.emit(m,e,t)}return this},y[s][g]=function(e){var t,n;if(!this[r])return this;if(!this[r][m])return arguments[a]===0?this[r]={}:this[r][e]&&delete this[r][e],this;if(arguments[a]===0){for(t in this[r]){if(t===m)continue;this[g](t)}return this[g](m),this[r]={},this}n=this[r][e];if(b(n))this[m](e,n);else while(n[a])this[m](e,n[n[a]-1]);return delete this[r][e],this},y[s].listeners=function(e){var t;return!this[r]||!this[r][e]?t=[]:b(this[r][e])?t=[this[r][e]]:t=this[r][e].slice(),t},y.listenerCount=function(e,t){var n;return!e[r]||!e[r][t]?n=0:b(e[r][t])?n=1:n=e[r][t][a],n}},{}],4:[function(e,t,n){var r="canvas",i="ctx",s="scale",o="realWidth",u="realHeight",a=e("./langeroids.js"),f=a._,l={id:"renderer",sortIndex:9999,width:300,height:100,scale:1},c=t.exports=function(e){f.extend(this,l,e)};f.extend(c.prototype,{onInit:function(e){this.game=e,f.isString(this[r])&&(this[r]=document.getElementById(this[r])),this[i]=this[r].getContext("2d"),this.resize()},onUpdate:function(){this.game.emit("draw",this)},resize:function(e,t,n){this[s]=n||this[s],this[o]=(e||this.width)*this[s],this[u]=(t||this.height)*this[s],this[r].width=this[o],this[r].height=this[u]},clear:function(e){this[i].restore(),this[i].save(),this[i][s](this[s],this[s]),this[i].fillStyle=e||"rgb(0, 0, 0)",this[i].fillRect(0,0,this[o],this[u])},drawText:function(e,t,n){this[i].fillStyle="rgb(255, 255, 255)",this[i].save(),this[i][s](2,2),this[i].fillText(n,e,t),this[i].restore()}})},{"./langeroids.js":6}],5:[function(e,t,n){var r=!1,i="components",s="componentsMap",o="prototype",u="requestId",a="initialized",f=e("./langeroids.js"),l=f._,c={initialized:r},h=t.exports=function(e){l.extend(this,c,e),this[i]=[],this[s]={}};f.inherits(h,f.EventEmitter),l.extend(h[o],{start:function(){this.init(),this.startLoop()},startLoop:function(){function t(n){e[u]=requestAnimationFrame(t),e.time=n,e.run()}var e=this;this[u]=requestAnimationFrame(t)},stop:function(){cancelAnimationFrame(this[u]),this[a]=r},run:function(){this.emit("update")},emit:function(e){h.super_[o].emit.apply(this,arguments);var t=Array[o].slice.call(arguments,0);t.unshift("default"),h.super_[o].emit.apply(this,t)},init:function(){this.sortComponents(),this.removeAllListeners();var e=this[i];for(var t=0;t<e.length;t++)f.setComponentListener(this,e[t]);this.emit("init",this),this[a]=!0},addComponent:function(e){this[i].push(e),l.isString(e.id)&&(this[s][e.id]=e),this[a]&&this.init()},sortComponents:function(){this[i]=l.sortBy(this[i],"sortIndex")},getComponent:function(e){return l.isString(e)?this[s][e]:r}})},{"./langeroids.js":6}],6:[function(e,t,n){var r="undefined",i="toLowerCase",s="test",o="length",u="requestAnimationFrame",a="cancelAnimationFrame",f="once",l="substr",c="listener";(function(h){var p=h;n=t.exports={_:e("underscore"),inherits:e("inherits"),EventEmitter:e("events").EventEmitter,browser:typeof window!==r&&p===window};if(n.browser){var d=navigator.userAgent[i](),v={iphone:/iphone/[s](d),ipod:/ipod/[s](d),ipad:/ipad/[s](d),android:/android/[s](d),blackberry:/blackberry/[s](d),nexus7:/nexus 7/[s](d),windowsPhone:/windows phone/[s](d)};v.ios=v.iphone||v.ipod||v.ipad,v.mobile=v.ios||v.android||v.blackberry||v.windowsPhone,n.device=v}(function(){var e=0;if(n.browser){var t=["webkit","moz"];for(var r=0;r<t[o]&&!window[u];++r)window[u]=window[t[r]+"RequestAnimationFrame"],window[a]=window[t[r]+"CancelAnimationFrame"]||window[t[r]+"CancelRequestAnimationFrame"]}p[u]||(p[u]=function(t,n){var r=(new Date).getTime(),i=Math.max(0,16-(r-e)),s=p.setTimeout(function(){t(r+i)},i);return e=r+i,s}),p[a]||(p[a]=function(e){clearTimeout(e)})})(),n.setComponentListener=function(e,t){var r=n._;r.each(r.functions(t),function(n){if(n.indexOf("on",0)===0){var s=n.indexOf(f,0)===0,u=n[l](s?4:2);if(u[o]>0){u=u[l](0,1)[i]()+u[l](1),r.isArray(t[c])||(t[c]={});var a=t[n].bind(t);t[c][u]=a,e[s?f:"on"](u,a)}}})},n.removeComponentListener=function(e,t,r){var i=n._;r=r||i.keys(t[c]);for(var s=0;s<r[o];s++)e.removeListener(r[s],t[c][r[s]])}}).call(this,typeof self!==r?self:typeof window!==r?window:{})},{events:3,inherits:8,underscore:9}],7:[function(e,t,n){var r="tStart",i="tDuration",s=e("./langeroids.js"),o=s._,u={game:null,tStart:null,tDuration:0},a=t.exports=function(e){o.extend(this,u,e)};o.extend(a.prototype,{set:function(e){this[r]=this.game.time,this[i]=e||this[i]},remaining:function(){return this[i]-(this.game.time-this[r])},repeat:function(){this[r]=this.game.time},done:function(){return this.remaining()<=0}})},{"./langeroids.js":6}],8:[function(e,t,n){var r="prototype";typeof Object.create=="function"?t.exports=function(t,n){t.super_=n,t[r]=Object.create(n[r],{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,n){t.super_=n;var i=function(){};i[r]=n[r],t[r]=new i,t[r].constructor=t}},{}],9:[function(e,t,n){var r="length",i=null,s="call",o="apply",u="isFunction",a="prototype",f=!1,l="identity",c="isArray",h=!0,p="lastIndexOf",d="_wrapped",v="reduceRight",m="filter",g="indexOf",y="concat",b="push",w="source",E="[object Boolean]",S="keys",x="isArguments",T="[object Array]",N="contains",C="reduce",k="forEach",L="isEmpty",A="escape",O="unescape",M="every",_="slice",D="object",P="templateSettings",H="undefined",B="function",j="random",F="'+\n((__t=(",I="replace",q="bind",R="constructor",U="has",z="join",W="pluck",X="value",V="sortedIndex",$="map",J="variable",K="extend";((function(){var e=this,et=e._,tt={},nt=Array[a],rt=Object[a],it=Function[a],st=nt[b],ot=nt[_],ut=nt[y],at=rt.toString,ft=rt.hasOwnProperty,lt=nt[k],ct=nt[$],ht=nt[C],pt=nt[v],dt=nt[m],vt=nt[M],mt=nt.some,gt=nt[g],yt=nt[p],bt=Array[c],wt=Object[S],Et=it[q],St=function(e){if(e instanceof St)return e;if(!(this instanceof St))return new St(e);this[d]=e};typeof n!==H?(typeof t!==H&&t.exports&&(n=t.exports=St),n._=St):e._=St,St.VERSION="1.5.2";var xt=St.each=St[k]=function(e,t,n){if(e==i)return;if(lt&&e[k]===lt)e[k](t,n);else if(e[r]===+e[r]){for(var o=0,u=e[r];o<u;o++)if(t[s](n,e[o],o,e)===tt)return}else{var a=St[S](e);for(var o=0,u=a[r];o<u;o++)if(t[s](n,e[a[o]],a[o],e)===tt)return}};St[$]=St.collect=function(e,t,n){var r=[];return e==i?r:ct&&e[$]===ct?e[$](t,n):(xt(e,function(e,i,o){r[b](t[s](n,e,i,o))}),r)};var Tt="Reduce of empty array with no initial value";St[C]=St.foldl=St.inject=function(e,t,n,o){var u=arguments[r]>2;e==i&&(e=[]);if(ht&&e[C]===ht)return o&&(t=St[q](t,o)),u?e[C](t,n):e[C](t);xt(e,function(e,r,i){u?n=t[s](o,n,e,r,i):(n=e,u=h)});if(!u)throw new TypeError(Tt);return n},St[v]=St.foldr=function(e,t,n,o){var u=arguments[r]>2;e==i&&(e=[]);if(pt&&e[v]===pt)return o&&(t=St[q](t,o)),u?e[v](t,n):e[v](t);var a=e[r];if(a!==+a){var f=St[S](e);a=f[r]}xt(e,function(r,i,l){i=f?f[--a]:--a,u?n=t[s](o,n,e[i],i,l):(n=e[i],u=h)});if(!u)throw new TypeError(Tt);return n},St.find=St.detect=function(e,t,n){var r;return Nt(e,function(e,i,o){if(t[s](n,e,i,o))return r=e,h}),r},St[m]=St.select=function(e,t,n){var r=[];return e==i?r:dt&&e[m]===dt?e[m](t,n):(xt(e,function(e,i,o){t[s](n,e,i,o)&&r[b](e)}),r)},St.reject=function(e,t,n){return St[m](e,function(e,r,i){return!t[s](n,e,r,i)},n)},St[M]=St.all=function(e,t,n){t||(t=St[l]);var r=h;return e==i?r:vt&&e[M]===vt?e[M](t,n):(xt(e,function(e,i,o){if(!(r=r&&t[s](n,e,i,o)))return tt}),!!r)};var Nt=St.some=St.any=function(e,t,n){t||(t=St[l]);var r=f;return e==i?r:mt&&e.some===mt?e.some(t,n):(xt(e,function(e,i,o){if(r||(r=t[s](n,e,i,o)))return tt}),!!r)};St[N]=St.include=function(e,t){return e==i?f:gt&&e[g]===gt?e[g](t)!=-1:Nt(e,function(e){return e===t})},St.invoke=function(e,t){var n=ot[s](arguments,2),r=St[u](t);return St[$](e,function(e){return(r?t:e[t])[o](e,n)})},St[W]=function(e,t){return St[$](e,function(e){return e[t]})},St.where=function(e,t,n){return St[L](t)?n?void 0:[]:St[n?"find":m](e,function(e){for(var n in t)if(t[n]!==e[n])return f;return h})},St.findWhere=function(e,t){return St.where(e,t,h)},St.max=function(e,t,n){if(!t&&St[c](e)&&e[0]===+e[0]&&e[r]<65535)return Math.max[o](Math,e);if(!t&&St[L](e))return-Infinity;var i={computed:-Infinity,value:-Infinity};return xt(e,function(e,r,o){var u=t?t[s](n,e,r,o):e;u>i.computed&&(i={value:e,computed:u})}),i[X]},St.min=function(e,t,n){if(!t&&St[c](e)&&e[0]===+e[0]&&e[r]<65535)return Math.min[o](Math,e);if(!t&&St[L](e))return Infinity;var i={computed:Infinity,value:Infinity};return xt(e,function(e,r,o){var u=t?t[s](n,e,r,o):e;u<i.computed&&(i={value:e,computed:u})}),i[X]},St.shuffle=function(e){var t,n=0,r=[];return xt(e,function(e){t=St[j](n++),r[n-1]=r[t],r[t]=e}),r},St.sample=function(e,t,n){return arguments[r]<2||n?e[St[j](e[r]-1)]:St.shuffle(e)[_](0,Math.max(0,t))};var Ct=function(e){return St[u](e)?e:function(t){return t[e]}};St.sortBy=function(e,t,n){var r=Ct(t);return St[W](St[$](e,function(e,t,i){return{value:e,index:t,criteria:r[s](n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),X)};var kt=function(e){return function(t,n,r){var o={},u=n==i?St[l]:Ct(n);return xt(t,function(n,i){var a=u[s](r,n,i,t);e(o,a,n)}),o}};St.groupBy=kt(function(e,t,n){(St[U](e,t)?e[t]:e[t]=[])[b](n)}),St.indexBy=kt(function(e,t,n){e[t]=n}),St.countBy=kt(function(e,t){St[U](e,t)?e[t]++:e[t]=1}),St[V]=function(e,t,n,o){n=n==i?St[l]:Ct(n);var u=n[s](o,t),a=0,f=e[r];while(a<f){var c=a+f>>>1;n[s](o,e[c])<u?a=c+1:f=c}return a},St.toArray=function(e){return e?St[c](e)?ot[s](e):e[r]===+e[r]?St[$](e,St[l]):St.values(e):[]},St.size=function(e){return e==i?0:e[r]===+e[r]?e[r]:St[S](e)[r]},St.first=St.head=St.take=function(e,t,n){return e==i?void 0:t==i||n?e[0]:ot[s](e,0,t)},St.initial=function(e,t,n){return ot[s](e,0,e[r]-(t==i||n?1:t))},St.last=function(e,t,n){return e==i?void 0:t==i||n?e[e[r]-1]:ot[s](e,Math.max(e[r]-t,0))},St.rest=St.tail=St.drop=function(e,t,n){return ot[s](e,t==i||n?1:t)},St.compact=function(e){return St[m](e,St[l])};var Lt=function(e,t,n){return t&&St[M](e,St[c])?ut[o](n,e):(xt(e,function(e){St[c](e)||St[x](e)?t?st[o](n,e):Lt(e,t,n):n[b](e)}),n)};St.flatten=function(e,t){return Lt(e,t,[])},St.without=function(e){return St.difference(e,ot[s](arguments,1))},St.uniq=St.unique=function(e,t,n,i){St[u](t)&&(i=n,n=t,t=f);var s=n?St[$](e,n,i):e,o=[],a=[];return xt(s,function(n,i){if(t?!i||a[a[r]-1]!==n:!St[N](a,n))a[b](n),o[b](e[i])}),o},St.union=function(){return St.uniq(St.flatten(arguments,h))},St.intersection=function(e){var t=ot[s](arguments,1);return St[m](St.uniq(e),function(e){return St[M](t,function(t){return St[g](t,e)>=0})})},St.difference=function(e){var t=ut[o](nt,ot[s](arguments,1));return St[m](e,function(e){return!St[N](t,e)})},St.zip=function(){var e=St.max(St[W](arguments,r)[y](0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=St[W](arguments,""+n);return t},St[D]=function(e,t){if(e==i)return{};var n={};for(var s=0,o=e[r];s<o;s++)t?n[e[s]]=t[s]:n[e[s][0]]=e[s][1];return n},St[g]=function(e,t,n){if(e==i)return-1;var s=0,o=e[r];if(n){if(typeof n!="number")return s=St[V](e,t),e[s]===t?s:-1;s=n<0?Math.max(0,o+n):n}if(gt&&e[g]===gt)return e[g](t,n);for(;s<o;s++)if(e[s]===t)return s;return-1},St[p]=function(e,t,n){if(e==i)return-1;var s=n!=i;if(yt&&e[p]===yt)return s?e[p](t,n):e[p](t);var o=s?n:e[r];while(o--)if(e[o]===t)return o;return-1},St.range=function(e,t,n){arguments[r]<=1&&(t=e||0,e=0),n=arguments[2]||1;var i=Math.max(Math.ceil((t-e)/n),0),s=0,o=new Array(i);while(s<i)o[s++]=e,e+=n;return o};var At=function(){};St[q]=function(e,t){var n,r;if(Et&&e[q]===Et)return Et[o](e,ot[s](arguments,1));if(!St[u](e))throw new TypeError;return n=ot[s](arguments,2),r=function(){if(this instanceof r){At[a]=e[a];var u=new At;At[a]=i;var f=e[o](u,n[y](ot[s](arguments)));return Object(f)===f?f:u}return e[o](t,n[y](ot[s](arguments)))}},St.partial=function(e){var t=ot[s](arguments,1);return function(){return e[o](this,t[y](ot[s](arguments)))}},St.bindAll=function(e){var t=ot[s](arguments,1);if(t[r]===0)throw new Error("bindAll must be passed function names");return xt(t,function(t){e[t]=St[q](e[t],e)}),e},St.memoize=function(e,t){var n={};return t||(t=St[l]),function(){var r=t[o](this,arguments);return St[U](n,r)?n[r]:n[r]=e[o](this,arguments)}},St.delay=function(e,t){var n=ot[s](arguments,2);return setTimeout(function(){return e[o](i,n)},t)},St.defer=function(e){return St.delay[o](St,[e,1][y](ot[s](arguments,1)))},St.throttle=function(e,t,n){var r,s,u,a=i,l=0;n||(n={});var c=function(){l=n.leading===f?0:new Date,a=i,u=e[o](r,s)};return function(){var h=new Date;!l&&n.leading===f&&(l=h);var p=t-(h-l);return r=this,s=arguments,p<=0?(clearTimeout(a),a=i,l=h,u=e[o](r,s)):!a&&n.trailing!==f&&(a=setTimeout(c,p)),u}},St.debounce=function(e,t,n){var r,s,u,a,f;return function(){u=this,s=arguments,a=new Date;var l=function(){var c=new Date-a;c<t?r=setTimeout(l,t-c):(r=i,n||(f=e[o](u,s)))},c=n&&!r;return r||(r=setTimeout(l,t)),c&&(f=e[o](u,s)),f}},St.once=function(e){var t=f,n;return function(){return t?n:(t=h,n=e[o](this,arguments),e=i,n)}},St.wrap=function(e,t){return function(){var n=[e];return st[o](n,arguments),t[o](this,n)}},St.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e[r]-1;n>=0;n--)t=[e[n][o](this,t)];return t[0]}},St.after=function(e,t){return function(){if(--e<1)return t[o](this,arguments)}},St[S]=wt||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)St[U](e,n)&&t[b](n);return t},St.values=function(e){var t=St[S](e),n=t[r],i=new Array(n);for(var s=0;s<n;s++)i[s]=e[t[s]];return i},St.pairs=function(e){var t=St[S](e),n=t[r],i=new Array(n);for(var s=0;s<n;s++)i[s]=[t[s],e[t[s]]];return i},St.invert=function(e){var t={},n=St[S](e);for(var i=0,s=n[r];i<s;i++)t[e[n[i]]]=n[i];return t},St.functions=St.methods=function(e){var t=[];for(var n in e)St[u](e[n])&&t[b](n);return t.sort()},St[K]=function(e){return xt(ot[s](arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},St.pick=function(e){var t={},n=ut[o](nt,ot[s](arguments,1));return xt(n,function(n){n in e&&(t[n]=e[n])}),t},St.omit=function(e){var t={},n=ut[o](nt,ot[s](arguments,1));for(var r in e)St[N](n,r)||(t[r]=e[r]);return t},St.defaults=function(e){return xt(ot[s](arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},St.clone=function(e){return St.isObject(e)?St[c](e)?e[_]():St[K]({},e):e},St.tap=function(e,t){return t(e),e};var Ot=function(e,t,n,o){if(e===t)return e!==0||1/e==1/t;if(e==i||t==i)return e===t;e instanceof St&&(e=e[d]),t instanceof St&&(t=t[d]);var a=at[s](e);if(a!=at[s](t))return f;switch(a){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case E:return+e==+t;case"[object RegExp]":return e[w]==t[w]&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!=D||typeof t!=D)return f;var l=n[r];while(l--)if(n[l]==e)return o[l]==t;var c=e[R],p=t[R];if(c!==p&&!(St[u](c)&&c instanceof c&&St[u](p)&&p instanceof p))return f;n[b](e),o[b](t);var v=0,m=h;if(a==T){v=e[r],m=v==t[r];if(m)while(v--)if(!(m=Ot(e[v],t[v],n,o)))break}else{for(var g in e)if(St[U](e,g)){v++;if(!(m=St[U](t,g)&&Ot(e[g],t[g],n,o)))break}if(m){for(g in t)if(St[U](t,g)&&!(v--))break;m=!v}}return n.pop(),o.pop(),m};St.isEqual=function(e,t){return Ot(e,t,[],[])},St[L]=function(e){if(e==i)return h;if(St[c](e)||St.isString(e))return e[r]===0;for(var t in e)if(St[U](e,t))return f;return h},St.isElement=function(e){return!!e&&e.nodeType===1},St[c]=bt||function(e){return at[s](e)==T},St.isObject=function(e){return e===Object(e)},xt(["Arguments","Function","String","Number","Date","RegExp"],function(e){St["is"+e]=function(t){return at[s](t)=="[object "+e+"]"}}),St[x](arguments)||(St[x]=function(e){return!!e&&!!St[U](e,"callee")}),typeof /./!==B&&(St[u]=function(e){return typeof e===B}),St.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},St.isNaN=function(e){return St.isNumber(e)&&e!=+e},St.isBoolean=function(e){return e===h||e===f||at[s](e)==E},St.isNull=function(e){return e===i},St.isUndefined=function(e){return e===void 0},St[U]=function(e,t){return ft[s](e,t)},St.noConflict=function(){return e._=et,this},St[l]=function(e){return e},St.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t[s](n,i);return r},St[j]=function(e,t){return t==i&&(t=e,e=0),e+Math.floor(Math[j]()*(t-e+1))};var Mt={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};Mt[O]=St.invert(Mt[A]);var _t={escape:new RegExp("["+St[S](Mt[A])[z]("")+"]","g"),unescape:new RegExp("("+St[S](Mt[O])[z]("|")+")","g")};St.each([A,O],function(e){St[e]=function(t){return t==i?"":(""+t)[I](_t[e],function(t){return Mt[e][t]})}}),St.result=function(e,t){if(e==i)return void 0;var n=e[t];return St[u](n)?n[s](e):n},St.mixin=function(e){xt(St.functions(e),function(t){var n=St[t]=e[t];St[a][t]=function(){var e=[this[d]];return st[o](e,arguments),jt[s](this,n[o](St,e))}})};var Dt=0;St.uniqueId=function(e){var t=++Dt+"";return e?e+t:t},St[P]={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Pt=/(.)^/,Ht={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},Bt=/\\|'|\r|\n|\t|\u2028|\u2029/g;St.template=function(e,t,n){var i;n=St.defaults({},n,St[P]);var o=new RegExp([(n[A]||Pt)[w],(n.interpolate||Pt)[w],(n.evaluate||Pt)[w]][z]("|")+"|$","g"),u=0,a="__p+='";e[I](o,function(t,n,i,s,o){return a+=e[_](u,o)[I](Bt,function(e){return"\\"+Ht[e]}),n&&(a+=F+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+=F+i+"))==null?'':__t)+\n'"),s&&(a+="';\n"+s+"\n__p+='"),u=o+t[r],t}),a+="';\n",n[J]||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(n[J]||"obj","_",a)}catch(f){throw f[w]=a,f}if(t)return i(t,St);var l=function(e){return i[s](this,e,St)};return l[w]="function("+(n[J]||"obj")+"){\n"+a+"}",l},St.chain=function(e){return St(e).chain()};var jt=function(e){return this._chain?St(e).chain():e};St.mixin(St),xt(["pop",b,"reverse","shift","sort","splice","unshift"],function(e){var t=nt[e];St[a][e]=function(){var n=this[d];return t[o](n,arguments),(e=="shift"||e=="splice")&&n[r]===0&&delete n[0],jt[s](this,n)}}),xt([y,z,_],function(e){var t=nt[e];St[a][e]=function(){return jt[s](this,t[o](this[d],arguments))}}),St[K](St[a],{chain:function(){return this._chain=h,this},value:function(){return this[d]}})}))[s](this)},{}],10:[function(e,t,n){"use strict";var r=e("underscore"),i={generation:0,grid:null},s=t.exports=function(e){r.extend(this,i,e),this.init()};r.extend(s.prototype,{init:function(){},updateStates:function(){return{}},tick:function(){this.generation++;var e=this.grid.cells;r.each(this.updateStates(),function(t,n){t>0?e[n]=t:delete e[n]})}})},{underscore:16}],11:[function(e,t,n){"use strict";var r=e("underscore"),i={delimiter:".",width:500,height:500,cells:null},s=t.exports=function(e){r.extend(this,i,e),this.clearCells()};r.extend(s.prototype,{clearCells:function(){this.cells={}},getCell:function(e,t){return this.cells[e+this.delimiter+t]},setCell:function(e,t,n){this.cells[e+this.delimiter+t]=n}})},{underscore:16}],12:[function(e,t,n){"use strict";var r="onState",i="dyingState",s=e("underscore"),o=e("./moore-neighborhood.js"),u={offState:0,onState:1,dyingState:2},a=t.exports=function(e){s.extend(this,u,e)};s.extend(a.prototype,{tick:function(e){var t=this,n=e.cells,u={};return s.each(n,function(n,a){var f=o(e,a);n===t[r]?u[a]=t[i]:n===t[i]&&(u[a]=t.offState),s.each(f.states,function(n,i){u[i]===undefined&&o(e,i).stateCounts[t[r]]===2&&(u[i]=t[r])})}),u}})},{"./moore-neighborhood.js":14,underscore:16}],13:[function(e,t,n){"use strict";var r="stateCounts",i=e("underscore"),s=e("./moore-neighborhood.js"),o={deadState:0,aliveState:1},u=t.exports=function(e){i.extend(this,o,e)};i.extend(u.prototype,{tick:function(e){var t=this.deadState,n=this.aliveState,o=e.cells,u={};return i.each(o,function(o,a){var f=s(e,a),l=f[r][n];o===n&&(!l||l<2||l>3)&&(u[a]=t),i.each(f.states,function(t,i){u[i]===undefined&&s(e,i)[r][n]===3&&(u[i]=n)})}),u}})},{"./moore-neighborhood.js":14,underscore:16}],14:[function(e,t,n){"use strict";var r="height",i="stateCounts";t.exports=function(t,n){var s={states:{},stateCounts:{}},o=t.cells,u=t.delimiter,a=n.split(u),f=parseFloat(a[0]),l=parseFloat(a[1]),c=(f-1+t.width)%t.width,h=(f+1)%t.width,p=(l-1+t[r])%t[r],d=(l+1)%t[r],v=[c+u+p,c+u+l,c+u+d,f+u+p,f+u+d,h+u+p,h+u+l,h+u+d];for(var m=0;m<v.length;m++){var g=v[m],y=o[g];s.states[g]=y,s[i][y]=s[i][y]>0?s[i][y]+1:1}return s}},{}],15:[function(e,t,n){"use strict";var r="headState",i="conductorState",s=e("underscore"),o=e("./moore-neighborhood.js"),u={emptyState:0,headState:1,tailState:2,conductorState:3},a=t.exports=function(e){s.extend(this,u,e)};s.extend(a.prototype,{tick:function(e){var t=this,n=e.cells,u={};return s.each(n,function(n,s){var a=o(e,s),f=a.stateCounts[t[r]];n===t[r]?u[s]=t.tailState:n===t.tailState?u[s]=t[i]:n===t[i]&&(f===1||f===2)&&(u[s]=t[r])}),u}})},{"./moore-neighborhood.js":14,underscore:16}],16:[function(e,t,n){var r="length",i=null,s="call",o="apply",u="isFunction",a="prototype",f=!1,l="isArray",c=!0,h="reduceRight",p="_wrapped",d="lastIndexOf",v="identity",m="constructor",g="filter",y="push",b="indexOf",w="contains",E="source",S="concat",x="function",T="[object Boolean]",N="keys",C="isArguments",k="slice",L="[object Array]",A="reduce",O="every",M="escape",_="forEach",D="'+\n((__t=(",P="unescape",H="object",B="templateSettings",j="undefined",F="isObject",I="property",q="random",R="bind",U="matches",z="join",W="has",X="pluck",V="sortedIndex",$="values",J="variable",K="extend";((function(){var e=this,et=e._,tt={},nt=Array[a],rt=Object[a],it=Function[a],st=nt[y],ot=nt[k],ut=nt[S],at=rt.toString,ft=rt.hasOwnProperty,lt=nt[_],ct=nt.map,ht=nt[A],pt=nt[h],dt=nt[g],vt=nt[O],mt=nt.some,gt=nt[b],yt=nt[d],bt=Array[l],wt=Object[N],Et=it[R],St=function(e){if(e instanceof St)return e;if(!(this instanceof St))return new St(e);this[p]=e};typeof n!==j?(typeof t!==j&&t.exports&&(n=t.exports=St),n._=St):e._=St,St.VERSION="1.6.0";var xt=St.each=St[_]=function(e,t,n){if(e==i)return e;if(lt&&e[_]===lt)e[_](t,n);else if(e[r]===+e[r]){for(var o=0,u=e[r];o<u;o++)if(t[s](n,e[o],o,e)===tt)return}else{var a=St[N](e);for(var o=0,u=a[r];o<u;o++)if(t[s](n,e[a[o]],a[o],e)===tt)return}return e};St.map=St.collect=function(e,t,n){var r=[];return e==i?r:ct&&e.map===ct?e.map(t,n):(xt(e,function(e,i,o){r[y](t[s](n,e,i,o))}),r)};var Tt="Reduce of empty array with no initial value";St[A]=St.foldl=St.inject=function(e,t,n,o){var u=arguments[r]>2;e==i&&(e=[]);if(ht&&e[A]===ht)return o&&(t=St[R](t,o)),u?e[A](t,n):e[A](t);xt(e,function(e,r,i){u?n=t[s](o,n,e,r,i):(n=e,u=c)});if(!u)throw new TypeError(Tt);return n},St[h]=St.foldr=function(e,t,n,o){var u=arguments[r]>2;e==i&&(e=[]);if(pt&&e[h]===pt)return o&&(t=St[R](t,o)),u?e[h](t,n):e[h](t);var a=e[r];if(a!==+a){var f=St[N](e);a=f[r]}xt(e,function(r,i,l){i=f?f[--a]:--a,u?n=t[s](o,n,e[i],i,l):(n=e[i],u=c)});if(!u)throw new TypeError(Tt);return n},St.find=St.detect=function(e,t,n){var r;return Nt(e,function(e,i,o){if(t[s](n,e,i,o))return r=e,c}),r},St[g]=St.select=function(e,t,n){var r=[];return e==i?r:dt&&e[g]===dt?e[g](t,n):(xt(e,function(e,i,o){t[s](n,e,i,o)&&r[y](e)}),r)},St.reject=function(e,t,n){return St[g](e,function(e,r,i){return!t[s](n,e,r,i)},n)},St[O]=St.all=function(e,t,n){t||(t=St[v]);var r=c;return e==i?r:vt&&e[O]===vt?e[O](t,n):(xt(e,function(e,i,o){if(!(r=r&&t[s](n,e,i,o)))return tt}),!!r)};var Nt=St.some=St.any=function(e,t,n){t||(t=St[v]);var r=f;return e==i?r:mt&&e.some===mt?e.some(t,n):(xt(e,function(e,i,o){if(r||(r=t[s](n,e,i,o)))return tt}),!!r)};St[w]=St.include=function(e,t){return e==i?f:gt&&e[b]===gt?e[b](t)!=-1:Nt(e,function(e){return e===t})},St.invoke=function(e,t){var n=ot[s](arguments,2),r=St[u](t);return St.map(e,function(e){return(r?t:e[t])[o](e,n)})},St[X]=function(e,t){return St.map(e,St[I](t))},St.where=function(e,t){return St[g](e,St[U](t))},St.findWhere=function(e,t){return St.find(e,St[U](t))},St.max=function(e,t,n){if(!t&&St[l](e)&&e[0]===+e[0]&&e[r]<65535)return Math.max[o](Math,e);var i=-Infinity,u=-Infinity;return xt(e,function(e,r,o){var a=t?t[s](n,e,r,o):e;a>u&&(i=e,u=a)}),i},St.min=function(e,t,n){if(!t&&St[l](e)&&e[0]===+e[0]&&e[r]<65535)return Math.min[o](Math,e);var i=Infinity,u=Infinity;return xt(e,function(e,r,o){var a=t?t[s](n,e,r,o):e;a<u&&(i=e,u=a)}),i},St.shuffle=function(e){var t,n=0,r=[];return xt(e,function(e){t=St[q](n++),r[n-1]=r[t],r[t]=e}),r},St.sample=function(e,t,n){return t==i||n?(e[r]!==+e[r]&&(e=St[$](e)),e[St[q](e[r]-1)]):St.shuffle(e)[k](0,Math.max(0,t))};var Ct=function(e){return e==i?St[v]:St[u](e)?e:St[I](e)};St.sortBy=function(e,t,n){return t=Ct(t),St[X](St.map(e,function(e,r,i){return{value:e,index:r,criteria:t[s](n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var kt=function(e){return function(t,n,r){var i={};return n=Ct(n),xt(t,function(o,u){var a=n[s](r,o,u,t);e(i,a,o)}),i}};St.groupBy=kt(function(e,t,n){St[W](e,t)?e[t][y](n):e[t]=[n]}),St.indexBy=kt(function(e,t,n){e[t]=n}),St.countBy=kt(function(e,t){St[W](e,t)?e[t]++:e[t]=1}),St[V]=function(e,t,n,i){n=Ct(n);var o=n[s](i,t),u=0,a=e[r];while(u<a){var f=u+a>>>1;n[s](i,e[f])<o?u=f+1:a=f}return u},St.toArray=function(e){return e?St[l](e)?ot[s](e):e[r]===+e[r]?St.map(e,St[v]):St[$](e):[]},St.size=function(e){return e==i?0:e[r]===+e[r]?e[r]:St[N](e)[r]},St.first=St.head=St.take=function(e,t,n){return e==i?void 0:t==i||n?e[0]:t<0?[]:ot[s](e,0,t)},St.initial=function(e,t,n){return ot[s](e,0,e[r]-(t==i||n?1:t))},St.last=function(e,t,n){return e==i?void 0:t==i||n?e[e[r]-1]:ot[s](e,Math.max(e[r]-t,0))},St.rest=St.tail=St.drop=function(e,t,n){return ot[s](e,t==i||n?1:t)},St.compact=function(e){return St[g](e,St[v])};var Lt=function(e,t,n){return t&&St[O](e,St[l])?ut[o](n,e):(xt(e,function(e){St[l](e)||St[C
](e)?t?st[o](n,e):Lt(e,t,n):n[y](e)}),n)};St.flatten=function(e,t){return Lt(e,t,[])},St.without=function(e){return St.difference(e,ot[s](arguments,1))},St.partition=function(e,t){var n=[],r=[];return xt(e,function(e){(t(e)?n:r)[y](e)}),[n,r]},St.uniq=St.unique=function(e,t,n,i){St[u](t)&&(i=n,n=t,t=f);var s=n?St.map(e,n,i):e,o=[],a=[];return xt(s,function(n,i){if(t?!i||a[a[r]-1]!==n:!St[w](a,n))a[y](n),o[y](e[i])}),o},St.union=function(){return St.uniq(St.flatten(arguments,c))},St.intersection=function(e){var t=ot[s](arguments,1);return St[g](St.uniq(e),function(e){return St[O](t,function(t){return St[w](t,e)})})},St.difference=function(e){var t=ut[o](nt,ot[s](arguments,1));return St[g](e,function(e){return!St[w](t,e)})},St.zip=function(){var e=St.max(St[X](arguments,r)[S](0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=St[X](arguments,""+n);return t},St[H]=function(e,t){if(e==i)return{};var n={};for(var s=0,o=e[r];s<o;s++)t?n[e[s]]=t[s]:n[e[s][0]]=e[s][1];return n},St[b]=function(e,t,n){if(e==i)return-1;var s=0,o=e[r];if(n){if(typeof n!="number")return s=St[V](e,t),e[s]===t?s:-1;s=n<0?Math.max(0,o+n):n}if(gt&&e[b]===gt)return e[b](t,n);for(;s<o;s++)if(e[s]===t)return s;return-1},St[d]=function(e,t,n){if(e==i)return-1;var s=n!=i;if(yt&&e[d]===yt)return s?e[d](t,n):e[d](t);var o=s?n:e[r];while(o--)if(e[o]===t)return o;return-1},St.range=function(e,t,n){arguments[r]<=1&&(t=e||0,e=0),n=arguments[2]||1;var i=Math.max(Math.ceil((t-e)/n),0),s=0,o=new Array(i);while(s<i)o[s++]=e,e+=n;return o};var At=function(){};St[R]=function(e,t){var n,r;if(Et&&e[R]===Et)return Et[o](e,ot[s](arguments,1));if(!St[u](e))throw new TypeError;return n=ot[s](arguments,2),r=function(){if(this instanceof r){At[a]=e[a];var u=new At;At[a]=i;var f=e[o](u,n[S](ot[s](arguments)));return Object(f)===f?f:u}return e[o](t,n[S](ot[s](arguments)))}},St.partial=function(e){var t=ot[s](arguments,1);return function(){var n=0,i=t[k]();for(var s=0,u=i[r];s<u;s++)i[s]===St&&(i[s]=arguments[n++]);while(n<arguments[r])i[y](arguments[n++]);return e[o](this,i)}},St.bindAll=function(e){var t=ot[s](arguments,1);if(t[r]===0)throw new Error("bindAll must be passed function names");return xt(t,function(t){e[t]=St[R](e[t],e)}),e},St.memoize=function(e,t){var n={};return t||(t=St[v]),function(){var r=t[o](this,arguments);return St[W](n,r)?n[r]:n[r]=e[o](this,arguments)}},St.delay=function(e,t){var n=ot[s](arguments,2);return setTimeout(function(){return e[o](i,n)},t)},St.defer=function(e){return St.delay[o](St,[e,1][S](ot[s](arguments,1)))},St.throttle=function(e,t,n){var r,s,u,a=i,l=0;n||(n={});var c=function(){l=n.leading===f?0:St.now(),a=i,u=e[o](r,s),r=s=i};return function(){var h=St.now();!l&&n.leading===f&&(l=h);var p=t-(h-l);return r=this,s=arguments,p<=0?(clearTimeout(a),a=i,l=h,u=e[o](r,s),r=s=i):!a&&n.trailing!==f&&(a=setTimeout(c,p)),u}},St.debounce=function(e,t,n){var r,s,u,a,f,l=function(){var c=St.now()-a;c<t?r=setTimeout(l,t-c):(r=i,n||(f=e[o](u,s),u=s=i))};return function(){u=this,s=arguments,a=St.now();var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(f=e[o](u,s),u=s=i),f}},St.once=function(e){var t=f,n;return function(){return t?n:(t=c,n=e[o](this,arguments),e=i,n)}},St.wrap=function(e,t){return St.partial(t,e)},St.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e[r]-1;n>=0;n--)t=[e[n][o](this,t)];return t[0]}},St.after=function(e,t){return function(){if(--e<1)return t[o](this,arguments)}},St[N]=function(e){if(!St[F](e))return[];if(wt)return wt(e);var t=[];for(var n in e)St[W](e,n)&&t[y](n);return t},St[$]=function(e){var t=St[N](e),n=t[r],i=new Array(n);for(var s=0;s<n;s++)i[s]=e[t[s]];return i},St.pairs=function(e){var t=St[N](e),n=t[r],i=new Array(n);for(var s=0;s<n;s++)i[s]=[t[s],e[t[s]]];return i},St.invert=function(e){var t={},n=St[N](e);for(var i=0,s=n[r];i<s;i++)t[e[n[i]]]=n[i];return t},St.functions=St.methods=function(e){var t=[];for(var n in e)St[u](e[n])&&t[y](n);return t.sort()},St[K]=function(e){return xt(ot[s](arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},St.pick=function(e){var t={},n=ut[o](nt,ot[s](arguments,1));return xt(n,function(n){n in e&&(t[n]=e[n])}),t},St.omit=function(e){var t={},n=ut[o](nt,ot[s](arguments,1));for(var r in e)St[w](n,r)||(t[r]=e[r]);return t},St.defaults=function(e){return xt(ot[s](arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},St.clone=function(e){return St[F](e)?St[l](e)?e[k]():St[K]({},e):e},St.tap=function(e,t){return t(e),e};var Ot=function(e,t,n,o){if(e===t)return e!==0||1/e==1/t;if(e==i||t==i)return e===t;e instanceof St&&(e=e[p]),t instanceof St&&(t=t[p]);var a=at[s](e);if(a!=at[s](t))return f;switch(a){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case T:return+e==+t;case"[object RegExp]":return e[E]==t[E]&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!=H||typeof t!=H)return f;var l=n[r];while(l--)if(n[l]==e)return o[l]==t;var h=e[m],d=t[m];if(h!==d&&!(St[u](h)&&h instanceof h&&St[u](d)&&d instanceof d)&&m in e&&m in t)return f;n[y](e),o[y](t);var v=0,g=c;if(a==L){v=e[r],g=v==t[r];if(g)while(v--)if(!(g=Ot(e[v],t[v],n,o)))break}else{for(var b in e)if(St[W](e,b)){v++;if(!(g=St[W](t,b)&&Ot(e[b],t[b],n,o)))break}if(g){for(b in t)if(St[W](t,b)&&!(v--))break;g=!v}}return n.pop(),o.pop(),g};St.isEqual=function(e,t){return Ot(e,t,[],[])},St.isEmpty=function(e){if(e==i)return c;if(St[l](e)||St.isString(e))return e[r]===0;for(var t in e)if(St[W](e,t))return f;return c},St.isElement=function(e){return!!e&&e.nodeType===1},St[l]=bt||function(e){return at[s](e)==L},St[F]=function(e){return e===Object(e)},xt(["Arguments","Function","String","Number","Date","RegExp"],function(e){St["is"+e]=function(t){return at[s](t)=="[object "+e+"]"}}),St[C](arguments)||(St[C]=function(e){return!!e&&!!St[W](e,"callee")}),typeof /./!==x&&(St[u]=function(e){return typeof e===x}),St.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},St.isNaN=function(e){return St.isNumber(e)&&e!=+e},St.isBoolean=function(e){return e===c||e===f||at[s](e)==T},St.isNull=function(e){return e===i},St.isUndefined=function(e){return e===void 0},St[W]=function(e,t){return ft[s](e,t)},St.noConflict=function(){return e._=et,this},St[v]=function(e){return e},St.constant=function(e){return function(){return e}},St[I]=function(e){return function(t){return t[e]}},St[U]=function(e){return function(t){if(t===e)return c;for(var n in e)if(e[n]!==t[n])return f;return c}},St.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t[s](n,i);return r},St[q]=function(e,t){return t==i&&(t=e,e=0),e+Math.floor(Math[q]()*(t-e+1))},St.now=Date.now||function(){return(new Date).getTime()};var Mt={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};Mt[P]=St.invert(Mt[M]);var _t={escape:new RegExp("["+St[N](Mt[M])[z]("")+"]","g"),unescape:new RegExp("("+St[N](Mt[P])[z]("|")+")","g")};St.each([M,P],function(e){St[e]=function(t){return t==i?"":(""+t).replace(_t[e],function(t){return Mt[e][t]})}}),St.result=function(e,t){if(e==i)return void 0;var n=e[t];return St[u](n)?n[s](e):n},St.mixin=function(e){xt(St.functions(e),function(t){var n=St[t]=e[t];St[a][t]=function(){var e=[this[p]];return st[o](e,arguments),jt[s](this,n[o](St,e))}})};var Dt=0;St.uniqueId=function(e){var t=++Dt+"";return e?e+t:t},St[B]={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Pt=/(.)^/,Ht={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},Bt=/\\|'|\r|\n|\t|\u2028|\u2029/g;St.template=function(e,t,n){var i;n=St.defaults({},n,St[B]);var o=new RegExp([(n[M]||Pt)[E],(n.interpolate||Pt)[E],(n.evaluate||Pt)[E]][z]("|")+"|$","g"),u=0,a="__p+='";e.replace(o,function(t,n,i,s,o){return a+=e[k](u,o).replace(Bt,function(e){return"\\"+Ht[e]}),n&&(a+=D+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+=D+i+"))==null?'':__t)+\n'"),s&&(a+="';\n"+s+"\n__p+='"),u=o+t[r],t}),a+="';\n",n[J]||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(n[J]||"obj","_",a)}catch(f){throw f[E]=a,f}if(t)return i(t,St);var l=function(e){return i[s](this,e,St)};return l[E]="function("+(n[J]||"obj")+"){\n"+a+"}",l},St.chain=function(e){return St(e).chain()};var jt=function(e){return this._chain?St(e).chain():e};St.mixin(St),xt(["pop",y,"reverse","shift","sort","splice","unshift"],function(e){var t=nt[e];St[a][e]=function(){var n=this[p];return t[o](n,arguments),(e=="shift"||e=="splice")&&n[r]===0&&delete n[0],jt[s](this,n)}}),xt([S,z,k],function(e){var t=nt[e];St[a][e]=function(){return jt[s](this,t[o](this[p],arguments))}}),St[K](St[a],{chain:function(){return this._chain=c,this},value:function(){return this[p]}}),typeof define===x&&define.amd&&define("underscore",[],function(){return St})}))[s](this)},{}]},{},[2]);